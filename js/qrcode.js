!function(){function o(o){var e=o.replace("-","_"),n={};return n[e+"_option_type"]=$("#"+o+"-option-type").val(),n[e+"_option_color"]=$("#"+o+"-option-color").val(),n}function e(o,e){return{color:o[e+"_option_color"],type:o[e+"_option_type"]}}function n(o,e){var n=new FileReader;n.onloadend=function(){e(n.result)},n.readAsDataURL(o)}function r(o,e){if(o instanceof File)return n(o,e);ot.getBlob(o,function(o){n(o,e)})}function i(o,n){var r=o.type,i="svg"===r?"svg":"canvas",a=o.ec;void 0===a&&(a=o.image?"H":"Q");var t={width:o.size,height:o.size,margin:o.padding||5,type:i,data:o.input,image:o.image,imageOptions:{imageSize:o.image_size||.4,margin:o.image_margin||0,hideBackgroundDots:"1"!==o.image_show_background},dotsOptions:e(o,"dot"),cornersSquareOptions:e(o,"corners_square"),cornersDotOptions:e(o,"corners_dot"),qrOptions:{errorCorrectionLevel:a},backgroundOptions:{color:o.background_option_color}},c=document.getElementById("qrcode");new QRCodeStyling(t).getRawData(r).then(function(o){var e=new FileReader;e.onload=function(o){c.innerHTML='<img src="'+o.target.result+'"/>',n&&n(o.target.result,r)},e.readAsDataURL(o)}).catch(function(o){console.log(o),n(null)})}if(window.fetchQuery=function(){for(var o={},e=location.search.substring(1),n=e.split("&"),r=0;r<n.length;++r){var i=n[r].split("=");o[i[0]]=decodeURIComponent(i[1])}return o},window.generateByQuery=function(o,e){o.image?r(o.image,function(n){o.image=n,i(o,e)}):i(o,e)},window.$){var a=$("#qrcode"),t=$("#image-type"),c=$("#image"),l=$("#url-block"),d=$(".share-block"),s=$("#download-image"),g=a.html(),u=$("#file-block"),p=$(".droppable-zone");if(!window.FileReader)return void a.text("Your browser does not support.");var h;p.on("droppableFile:change",function(o,e){h=e[0]}),window.generate=function(e){var n=t.val(),r="file"===n?h:c.val(),i=$("#size").val(),l=Object.assign({input:e,type:$("#type").val(),size:i,padding:$("#padding").val(),ec:$("#ec").val(),image:r,image_size:$("#image-size").val(),image_margin:$("#image-margin").val(),image_show_background:$("#image-show-background").prop("checked")?"1":"0",background_option_color:$("#background-option-color").val()},o("dot"),o("corners-square"),o("corners-dot"));generateByQuery(l,function(o,e){o?(s.attr("download","qrcode."+e).attr("href",o),s.show()):(a.html(g),s.hide())});var d=$("#share-link").val().replace("/generator/?","/?");return $("#qrcode-link").val(d),'<iframe src="'+d+'" frameborder="0" scrolling="no" width="'+i+'" height="'+i+'"></iframe>'},$(window).on("methodLoad",function(){t.change(function(){"url"===t.val()?(l.show(),u.hide(),d.show()):(l.hide(),u.show(),d.hide())}),t.change(),$(".color-input").each(function(){var o,e=$(this).find("input"),n=$(this).find(".color");n.css("background-color",e.val()),e.change(function(){n.css("background-color",e.val()),o&&(o.color.setColor(e.val()),o.render())}),n.colorPicker({doRender:!1,buildCallback:function(){o=this},renderCallback:function(o,r){n.css("background-color",o._css.backgroundColor),!1===r&&(e.val(o._css.backgroundColor),e.trigger("input"))}})})})}}();